# Наблюдение на обработката

След като обработката е започнала, Chloros предоставя няколко начина за наблюдение на напредъка, проверка за проблеми и разбиране на какво се случва с вашия набор от данни. На тази страница се обяснява как да проследявате обработката и да интерпретирате информацията, която Chloros предоставя.

## Общ преглед на лентата за напредък

Индикаторът за напредъка в горната част на заглавната лента показва състоянието на обработката в реално време и процента на завършеност.

### Индикатор за напредъка в безплатен режим

За потребители без лиценз за Chloros+:

**Показване на напредъка в 2 етапа:**

1. **Откриване на целта** – Намиране на калибрационни цели в изображенията
2. **Обработка** – Прилагане на корекции и експортиране

**Индикаторът за напредъка показва:**

* Общ процент на завършеност (0-100%)
* Име на текущия етап
* Опростена визуализация с хоризонтална лента

### Индикатор за напредъка на Chloros+

За потребители с лиценз Chloros+:

**4-етапен индикатор за напредъка:**

1. **Откриване** - Намиране на калибрационни цели
2. **Анализиране** - Проверка на изображенията и подготовка на тръбопровода
3. **Калибриране** - Прилагане на корекции на винетката и отражателната способност
4. **Експортиране** - Запазване на обработените файлове

**Интерактивни функции:**

* **Навесете курсора** върху индикатора за напредък, за да видите разширения 4-етапен панел
* **Кликнете** върху лентата за напредък, за да замразите/закрепите разширения панел
* **Кликнете отново**, за да размразите и автоматично скриете при отпускане на мишката
* Всеки етап показва индивидуален напредък (0-100%)

***

## Разбиране на всеки етап от обработката

### Етап 1: Откриване (откриване на цели)

**Какво се случва:**

* Chloros сканира изображенията, маркирани с отметката „Цел“
* Алгоритмите за компютърно зрение идентифицират 4-те калибрационни панела
* Извличат се стойностите на отражателната способност от всеки панел
* Записват се времевите отметки на целите за правилното планиране на калибрирането

**Продължителност:**

* С маркирани цели: 10-60 секунди
* Без маркирани цели: 5-30+ минути (сканира всички изображения)

**Индикатор за напредък:**

* Откриване: 0% → 100%
* Брой сканирани изображения
* Брой намерени цели

**На какво да обърнете внимание:**

* Процесът трябва да приключи бързо, ако целите са маркирани правилно
* Ако отнема прекалено много време, целите може да не са маркирани
* Проверете Debug Log за съобщения „Target found“ (Намерена цел)

### Етап 2: Анализиране

**Какво се случва:**

* Четене на EXIF метаданни на изображенията (времеви отметки, настройки на експозицията)
* Определяне на стратегия за калибриране въз основа на времевите отметки на целите
* Организиране на опашката за обработка на изображенията
* Подготовка на работници за паралелна обработка (само Chloros+)

**Продължителност:** 5-30 секунди

**Индикатор за напредъка:**

* Анализ: 0% → 100%
* Бърз етап, обикновено приключва бързо

**На какво да обърнете внимание:**

* Трябва да напредва стабилно без паузи
* Предупреждения за липсващи метаданни ще се появят в Debug Log

### Етап 3: Калибриране

**Какво се случва:**

* **Дебайеринг**: Преобразуване на RAW Bayer модел в 3 канала
* **Корекция на винет**: Премахване на потъмняването по краищата на обектива
* **Калибриране на отражателната способност**: Нормализиране с целеви стойности
* **Изчисляване на индекс**: Изчисляване на мултиспектрални индекси
* Обработка на всяко изображение през цялата верига

**Продължителност:** По-голямата част от общото време за обработка (60-80%)

**Индикатор за напредък:**

* Калибриране: 0% → 100%
* Текущо обработвано изображение
* Завършени изображения / Общо изображения

**Поведение при обработка:**

* **Свободен режим**: Обработва последователно по едно изображение
* **Режим Chloros+**: Обработва до 16 изображения едновременно
* **Ускорение на GPU**: Значително ускорява този етап

**На какво да обърнете внимание:**

* Стабилен напредък по брой изображения
* Проверете Debug Log за съобщения за завършване на всяко изображение
* Предупреждения за проблеми с качеството на изображението или калибрирането

### Етап 4: Експортиране

**Какво се случва:**

* Записване на калибрирани изображения на диск в избрания формат
* Експортиране на мултиспектрални индексни изображения с LUT цветове
* Създаване на подпапки за модели камери
* Запазване на оригиналните имена на файловете с подходящи суфикси

**Продължителност:** 10-20% от общото време за обработка

**Индикатор за напредъка:**

* Експортиране: 0% → 100%
* Записване на файлове
* Формат и местоназначение на експортирането

**Какво да следите:**

* Предупреждения за дисково пространство
* Грешки при записване на файлове
* Завършване на всички конфигурирани изходи

***

## Раздел „Дневник за отстраняване на грешки“

Дневникът за отстраняване на грешки предоставя подробна информация за напредъка на обработката и всички възникнали проблеми.

### Достъп до дневника за отстраняване на грешки

1. Кликнете върху иконата **Дневник за отстраняване на грешки** <img src="../.gitbook/assets/icon_log.JPG" alt="" data-size="line"> в лявата странична лента
2. Отваря се панелът с лога, показващ съобщения за обработката в реално време
3. Автоматично превъртане, за да се покажат най-новите съобщения

### Разбиране на съобщенията в лога

#### Информационни съобщения (бели/сиви)

Нормални актуализации на обработката:

```
[INFO] Processing started
[INFO] Target detected in IMG_0015.RAW - 4 panels found
[INFO] Calibrating IMG_0234.RAW
[INFO] Exported NDVI image: IMG_0234_NDVI.tif
[INFO] Processing complete
```

#### Предупредителни съобщения (жълти)

Некритични проблеми, които не спират обработката:

```
[WARN] No GPS data found in IMG_0145.RAW
[WARN] Target image timestamp gap > 30 minutes
[WARN] Low contrast in calibration panel - results may vary
```

**Действие:** Прегледайте предупрежденията след обработката, но не прекъсвайте

#### Съобщения за грешки (Red)

Критични проблеми, които могат да причинят неуспешна обработка:

```
[ERROR] Cannot write file - disk full
[ERROR] Corrupted image file: IMG_0299.RAW
[ERROR] No targets detected - enable reflectance calibration or mark target images
```

**Действие:** Спрете обработката, отстранете грешката и рестартирайте.

### Често срещани съобщения в лога

| Съобщение                          | Значение                                | Необходимо действие                                         |
| -------------------------------- | -------------------------------------- | ----------------------------------------------------- |
| „Цел открита в \[име на файл]” | Калибрационна цел открита успешно  | Няма – нормално                                         |
| „Обработка на изображение X от Y”        | Актуализация на текущия напредък                | Няма – нормално                                         |
| „Няма открити цели”               | Няма открити калибрационни цели        | Маркирайте целевите изображения или деактивирайте калибрирането на отражателната способност |
| „Недостатъчно дисково пространство“        | Недостатъчно място за съхранение на резултатите          | Освободете дисково пространство                                    |
| „Пропускане на повреден файл“        | Изображението е повредено                  | Копирайте отново файла от SD картата                             |
| „Приложени PPK данни“               | Приложени GPS корекции от .daq файл | Няма - нормално                                         |

### Копиране на данни от лога

За да копирате лога за отстраняване на проблеми или поддръжка:

1. Отворете панела „Debug Log“ (Лог за отстраняване на проблеми)
2. Кликнете върху бутона **„Copy Log“ (Копиране на лога)** (или кликнете с десния бутон → Изберете всичко)
3. Поставете в текстов файл или имейл
4. Изпратете до поддръжката на MAPIR, ако е необходимо

***

## Мониторинг на системните ресурси

### Използване на CPU

**Свободен режим:**

* 1 CPU ядро на \~100%
* Другите ядра са в режим на изчакване или са налични
* Системата остава отзивчива

**Chloros+ Паралелен режим:**

* Няколко ядра на 80-100% (до 16 ядра)
* Висока обща използваемост на CPU
* Системата може да изглежда по-малко отзивчива

**За наблюдение:**

* Windows Task Manager (Ctrl+Shift+Esc)
* Раздел „Performance“ → секция „CPU“
* Потърсете процесите „Chloros“ или „chloros-backend“

### Използване на паметта (RAM)

**Типично използване:**

* Малки проекти (&lt; 100 изображения): 2-4 GB
* Средни проекти (100-500 изображения): 4-8 GB
* Големи проекти (500+ изображения): 8-16 GB
* Chloros+ паралелен режим използва повече RAM

**Ако паметта е недостатъчна:**

* Обработвайте по-малки партиди
* Затворете другите приложения
* Увеличете RAM, ако редовно обработвате големи масиви от данни

### Използване на GPU (Chloros+ с CUDA)

Когато GPU ускорението е активирано:

* NVIDIA GPU показва висока степен на използване (60-90%)
* Употребата на VRAM се увеличава (изисква 4 GB+ VRAM)
* Етапът на калибриране е значително по-бърз

**За наблюдение:**

* Икона на NVIDIA в системната лента
* Task Manager → Performance → GPU
* GPU-Z или подобен инструмент за наблюдение

### Дисково I/O

**Какво да очаквате:**

* Високо четене на диска по време на етапа на анализиране
* Високо записване на диска по време на етапа на експортиране
* SSD е значително по-бърз от HDD

**Съвет за производителност:**

* Използвайте SSD за папката на проекта, когато е възможно
* Избягвайте мрежови устройства за големи масиви от данни
* Уверете се, че дискът не е близо до капацитета си (влияе на скоростта на записване)

***

## Откриване на проблеми по време на обработката

### Предупредителни знаци

**Забавяне на процеса (без промяна в продължение на 5+ минути):**

* Проверете лога за отстраняване на грешки за грешки
* Проверете наличното дисково пространство
* Проверете Task Manager, за да се уверите, че Chloros работи

**Често се появяват съобщения за грешки:**

* Спрете обработката и прегледайте грешките
* Чести причини: дисково пространство, повредени файлове, проблеми с паметта
* Вижте раздела „Отстраняване на проблеми“ по-долу

**Системата не отговаря:**

* Chloros+ паралелен режим използва прекалено много ресурси
* Обмислете да намалите едновременните задачи или да надстроите хардуера
* Свободният режим изисква по-малко ресурси

### Кога да спрете обработката

Спрете обработката, ако видите:

* ❌ Грешки „Дискът е пълен“ или „Не може да се запише файл“
* ❌ Повтарящи се грешки за повредени файлове с изображения
* ❌ Системата е напълно блокирана (не отговаря)
* ❌ Установени са неправилни настройки
* ❌ Импортирани са неправилни изображения

**Как да спрете:**

1. Кликнете върху **бутона „Спри/Отмени“** (замества бутона „Старт“)
2. Обработката спира, напредъкът се губи
3. Отстранете проблемите и започнете отначало

***

## Отстраняване на проблеми по време на обработката

### Обработката е много бавна

**Възможни причини:**

* Немаркирани целеви изображения (сканиране на всички изображения)
* HDD вместо SSD памет
* Недостатъчни системни ресурси
* Много индекси
* Достъп до мрежово устройство

**Решения:**

1. Ако току-що сте започнали и сте в етап на откриване: Отменете, маркирайте целите, рестартирайте
2. За в бъдеще: Използвайте SSD, намалете индексите, надстройте хардуера
3. Обмислете CLI за пакетна обработка на големи масиви от данни

### Предупреждения за „дисково пространство“

**Решения:**

1. Освободете незабавно дисково пространство
2. Преместете проекта на диск с повече пространство
3. Намалете броя на индексите за експортиране
4. Използвайте JPG формат вместо TIFF (по-малки файлове)

### Чести съобщения за „повреден файл”

**Решения:**

1. Копирайте отново изображенията от SD картата, за да гарантирате целостта им
2. Проверете SD картата за грешки
3. Премахнете повредените файлове от проекта
4. Продължете обработката на останалите изображения

### Прегряване/забавяне на системата

**Решения:**

1. Осигурете адекватна вентилация.
2. Почистете праха от вентилационните отвори на компютъра.
3. Намалете натоварването на процесора (използвайте режим Free вместо Chloros+).
4. Извършвайте обработката по-хладното време на деня.

***

## Уведомление за завършена обработка

Когато обработката приключи:

* Индикаторът за напредъка достига 100%
* В Debug Log се появява съобщението **„Обработката е завършена“**
* Бутонът „Старт“ отново става активен
* Всички изходни файлове са в подпапката на модела на камерата

***

## Следващи стъпки

След като обработката приключи:

1. **Прегледайте резултатите** – вижте [Завършване на обработката](finishing-the-processing.md)
2. **Проверете папката с изходните файлове** – Уверете се, че всички файлове са експортирани правилно
3. **Прегледайте Debug Log** – Проверете за предупреждения или грешки
4. **Прегледайте обработените изображения** – Използвайте Image Viewer или външен софтуер

За информация относно прегледа и използването на обработените резултати, вижте [Завършване на обработката](finishing-the-processing.md).
