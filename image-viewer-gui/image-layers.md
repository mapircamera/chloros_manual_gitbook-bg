# Слоеве на изображения

Падащото меню „Слоеве на изображения“ в Chloros Image Viewer ви позволява бързо да превключвате между различни версии на едно и също изображение – от оригиналните снимки до обработените отразяващи изходи и изчислените индексни изображения.

## Какво представляват слоевете на изображения?

В Chloros **слоевете** се отнасят до различните изображения, които са налични за едно изходно изображение. Когато обработвате изображения, Chloros създава няколко версии:

* **Оригинални изображения** (JPG и RAW файлове от вашата камера)
* **Калибрирани по отражателност** изображения (ако калибрирането по отражателност е било активирано)
* **Целеви изображения** (ако изображението съдържа калибрационни цели)
* **Индексни изображения** (NDVI, NDRE, GNDVI и т.н., ако индексите са конфигурирани)

**Падащото меню за избор на слой** в горния десен ъгъл на Image Viewer ви позволява да превключвате незабавно между тези версии, без да напускате прозореца.

***

## Налични типове слоеве

### JPG

* Оригиналното JPG изображение за преглед от вашия фотоапарат
* Винаги налично за всички изображения
* Необработено, както е заснето от фотоапарата
* Най-бързо се зарежда и показва

**Кога да го преглеждате:**

* Бърз преглед на оригиналния кадър
* Проверка на композицията и кадрирането на изображението
* Проверка на качеството на кадъра преди обработка

### RAW (Оригинален)

* Оригиналните RAW данни от сензора на вашата камера
* Дебайеризирани, без приложена последваща обработка
* По-висока битова дълбочина от JPG (обикновено 12-битови или 14-битови данни от сензора)

**Кога да го видите:**

* Проверка на качеството на оригиналните данни от сензора
* Проверка за проблеми със сензора или артефакти
* Сравнение на резултатите преди/след обработката

### RAW (Цел)

* Появява се само за изображения, идентифицирани като съдържащи калибрационни цели
* Показва оригиналното RAW изображение с открита цел
* Използва се за проверка на успешното откриване на целта

**Кога да го видите:**

* Потвърждаване, че калибрационните цели са открити правилно
* Проверка на качеството на изображението на целта
* Отстраняване на проблеми с калибрирането

{% hint style=&quot;info&quot; %}
**Слой на целта**: Този слой се появява само в падащото меню за изображения, които съдържат калибрационни цели. Обикновените заснети изображения нямат тази опция.
{% endhint %}

### RAW (отражателност)

* Калибрираното изображение на отражателността
* Коригирана винетка (ако е активирана при обработката)
* Отражателност, калибрирана с помощта на целеви данни (ако е активирана)
* Многолентов TIFF с всички канали на камерата
* Стойностите на пикселите представляват процентна отражателност (при използване на процентен режим)
* Готов за манипулиране с [Index/LUT Sandbox](index-lut-sandbox.md)

**Кога да се разгледа:**

* Проверка на калибрираните резултати
* Проверка на качеството на калибрирането
* Проверка на стойностите на пикселите за научна точност
* Сравнение с оригинала, за да се видят ефектите от калибрирането

{% hint style=&quot;success&quot; %}
**Препоръчително**: Използвайте слой RAW (отражателна способност) при проверка на стойностите на пикселите за научни измервания и анализ.
{% endhint %}

### RAW (NDVI Index)... и подобни

* Изчислено изображение на растителния индекс (NDVI в този пример)
* Името на индекса се променя в зависимост от това, кой индекс е бил конфигуриран по време на обработката
* Примери: RAW (NDVI Index), RAW (NDRE Index), RAW (GNDVI Index) и др.
* Еднолентово изображение в сиво, показващо резултатите от изчислението на индекса
* За всеки индекс, конфигуриран в настройките на проекта, се появява един слой

**Възможни имена на индекси:**

* RAW (NDVI индекс)
* RAW (NDRE индекс)
* RAW (GNDVI индекс)
* RAW (OSAVI индекс)
* RAW (EVI индекс)
* RAW (SAVI индекс)
* И много други... (вижте [Формули за мултиспектрални индекси](../project-settings/multispectral-index-formulas.md))

**Кога да ги разгледате:**

* Проверка на резултатите от изчисленията на индекса
* Проверка на диапазоните на стойностите на индекса
* Идентифициране на области от интерес
* Проверка на изображенията на индекса преди използването им в ГИС или анализ

***

## Използване на селектора на слоеве

### Отваряне на падащото меню

1. Отворете изображение в режим на цял екран (кликнете върху някоя миниатюра в Image Viewer)
2. Намерете **падащото меню за слоеве** в горния десен ъгъл на прозореца
3. Падащото меню показва текущо избрания слой (напр. „JPG”)
4. Кликнете върху падащото меню, за да видите всички налични слоеве

### Превключване на слоеве

1. Кликнете върху падащото меню за слоеве, за да отворите списъка
2. Показват се всички налични слоеве за текущото изображение
3. Кликнете върху името на някой слой, за да превключите към тази версия
4. Изображението се актуализира незабавно, за да покаже избрания слой

**Бързо превключване:**

* Падащото меню запомня последния ви избор
* Когато преминавате към следващото изображение, Chloros се опитва да покаже същия тип слой
* Ако този слой не съществува в следващото изображение, по подразбиране се използва JPG

### Наличност на слоеве

Не всички слоеве са налични за всяко изображение:

**Винаги налични:**

* ✅ JPG (всяко изображение има JPG преглед)

**Налични при определени условия:**

* ⚠️ RAW (оригинал) – само ако изображението е заснето в режим RAW или RAW+JPG
* ⚠️ RAW (цел) – само ако изображението съдържа открити калибрационни цели
* ⚠️ RAW (отражателност) – само след обработка с активирана калибрация на отражателността
* ⚠️ RAW (\[Индекс] Индекс) – само след обработка с конфигурирани индекси

***

## Устойчивост на слоевете

### Навигация между изображенията

Когато преминавате към друго изображение (с помощта на клавишите със стрелки или чрез кликване върху миниатюрите):

**Предпочитанията за слоевете се запазват:**

* Ако разглеждате „RAW (отражателност)“, следващото изображение показва „RAW (отражателност)“ (ако е налично)
* Ако разглеждате „RAW (NDVI индекс)“, следващото изображение показва „RAW (NDVI индекс)“ (ако е налично)
* Ако същият слой не съществува, по подразбиране се използва JPG

**Пример за работния процес:**

1. Отворете изображение 1, превключете на RAW (NDVI Index)
2. Натиснете →, за да видите изображение 2
3. Изображение 2 автоматично показва слоя RAW (NDVI Index)
4. Продължете да навигирате – всички изображения показват слой NDVI
5. Много ефективно за преглед на резултатите от индексацията на много изображения

***

## Често срещани работни процеси

### Работен процес 1: Сравнение преди/след

**Цел**: Сравнение на оригиналното изображение с калибрираното

1. Отворете обработеното изображение в Image Viewer
2. Изберете **RAW (Original)** от падащото меню
3. Обърнете внимание на винетирането и некалибрираните стойности
4. Превключете на **RAW (Отражателност)** от падащото меню
5. Сравнете – винетирането е премахнато, стойностите са калибрирани

### Работен процес 2: Преглед на индекса

**Цел**: Бърз преглед на резултатите от NDVI в целия набор от данни

1. Отворете първото обработено изображение
2. Изберете **RAW (NDVI Index)** от падащото меню
3. Използвайте клавиша →, за да преминете към следващото изображение
4. Слойът NDVI се запазва автоматично
5. Продължете с всички изображения, като проверявате моделите NDVI
6. Превключете на **RAW (NDRE Index)**, за да сравните

### Работен процес 3: Проверка на целта

**Цел**: Проверете дали всички целеви изображения са открити правилно

1. Преминете към целево изображение
2. Изберете **RAW (Target)** от падащото меню
3. Проверете дали калибрационните цели са ясно видими и открити
4. Преминете към следващото целево изображение
5. Повторете проверката за всички цели

### Работен процес 4: Проверка на стойността на пикселите

**Цел**: Проверете стойностите на отражателната способност за научна точност

1. Отворете обработеното изображение
2. Изберете слой **RAW (Отражателна способност)**
3. Активирайте режим **Pixel Percent** (бутон в горния десен ъгъл на лентата с инструменти)
4. Преместете курсора върху растителните площи
5. Проверете дали стойностите на пикселите са в очакваните диапазони (30-70% за NIR, 5-15% за Red)
6. Проверете дали стойностите на почвените и водните площи са подходящи

***

## Разбиране на стойностите на пикселите по слоеве

Различните слоеве показват различни диапазони на стойностите на пикселите:

### JPG слой

* **Диапазон**: 0-255 (8-битов)
* **Значение**: Показани стойности, коригирани по гама
* **Употреба**: Само за визуална проверка, не за научни измервания

### RAW (оригинален)

* **Диапазон**: 0-65535 (16-битов)
* **Значение**: Сурови цифрови стойности на сензора
* **Употреба**: Проверка на работата на сензора, не е калибриран

### RAW (Отражателност)

* **Диапазон**: 0-65 535 (16-битов TIFF) или 0,0-1,0 (32-битов процент)
* **Значение**: Калибрирана процентна отражателна способност
* **Употреба**: Научни измервания и анализи

**За 16-битов TIFF:** Разделете на 65 535, за да получите процентна отражателна способност **За 32-битов процент:** Стойностите директно представляват процент (0,5 = 50% отражателна способност)

### RAW (Индексни изображения)

* **Диапазон**: Варира според индекса (обикновено от -1,0 до +1,0 за нормализирани индекси)
* **Значение**: Резултат от изчислението на индекса
* **Примери**:
  * NDVI: от -1 до +1 (растителност обикновено от 0,4 до 0,9)
  * NDRE: от -1 до +1 (откриване на стрес)
  * EVI: от 0 до 1 (подобрена растителност)

***

## Съвети и най-добри практики

### Ефективно превключване на слоеве

* **Познаване на клавишните комбинации**: Въпреки че няма клавишни комбинации за слоевете, стрелките за навигация (←/→) работят във всички слоеве
* **Последователни работни процеси**: Изберете един слой (напр. NDVI) и прегледайте целия набор от данни, преди да преминете към друг
* **Бързи сравнения**: Превключвайте между „Оригинал“ и „Отражателност“, за да проверите качеството на обработката

### Съображения за производителността

* **JPG се зарежда най-бързо**: Използвайте го за бърза навигация през много изображения.
* **RAW слоевете се зареждат по-бавно**: По-висока разделителна способност и битова дълбочина.
* **Индексни слоеве**: Скорост, подобна на тази на слоевете с отражателност.
* **Първото зареждане е най-бавно**: Последващите прегледи на същия слой се кешират и са по-бързи.

### Проверка на качеството

* **Винаги проверявайте RAW (оригинал)**: Проверете качеството на изходните данни, преди да се доверите на обработените резултати
* **Сравнете слоевете**: Използвайте превключване на слоеве, за да проверите дали обработката е работила правилно
* **Проверете индексните диапазони**: Използвайте режим Pixel Percent с индексни слоеве, за да проверите дали стойностите са разумни

***

## Отстраняване на проблеми

### Слойът не е наличен

**Проблем**: Очакваният слой не се появява в падащото меню

**Възможни причини:**

* Изображението не е обработено (налични са само JPG и RAW (оригинални))
* Калибрирането на отражателната способност е било деактивирано по време на обработката
* Конкретен индекс не е бил конфигуриран в настройките на проекта
* Изображението е само целево (не са генерирани индекси за целите)

**Решения:**

1. Проверете дали изображението е обработено (проверете папката с резултатите за обработени файлове)
2. Проверете настройките на проекта, за да потвърдите, че индексите са конфигурирани
3. Преобработете с активирани желаните индекси.

### Показан е грешен слой

**Проблем**: Изображението се отваря в неочакван слой.

**Причина**: Предпочитанията за слоя от предишното изображение са пренесени, но този слой не съществува в текущото изображение.

**Решение**: Chloros автоматично преминава към JPG, когато предпочитаният слой не е наличен – това е нормално поведение.

### Не се виждат калибрационни цели

**Проблем**: RAW (целевият) слой не показва откриване на цели.

**Възможни причини:**

* Целите не са били открити по време на обработката.
* Изображението всъщност не съдържа цели.
* Настройките за откриване на цели са прекалено строги.

**Решения:**

1. Проверете лога за отстраняване на грешки за съобщения „Цел открита“.
2. Уверете се, че изображението действително съдържа видими калибрационни цели.
3. Настройте настройките за откриване на цели в „Настройки на проекта“.
4. Вижте [Избор на целеви изображения](../processing-images-gui/choosing-target-images.md).

***

## Свързани функции

### Инструменти за преглед на изображения

При преглед на всеки слой можете да използвате:

* **Контроли за мащабиране**: Увеличете, за да разгледате подробностите.
* **Панорамиране**: Кликнете и плъзнете, за да се придвижите по увеличеното изображение.
* **Проверка на стойността на пикселите**: Вижте стойностите в мястото на курсора.
* **Стрелки за навигация**: Придвижвайте се между изображенията, като запазвате слоя.
* **Режим „Процент на пикселите“**: Превключвайте между DN и процентното показване.

Вижте [Отваряне на изображение на цял екран](opening-an-image-full-screen.md) за пълна документация за Image Viewer.

### Индекс/LUT Sandbox

За интерактивно тестване и визуализация на индекса:

* **Изчисляване на индекса в реално време**: Тествайте различни формули за индекса
* **LUT цветово картографиране**: Приложете цветови градиенти към индексите в сиво
* **Експортиране на визуализации**: Запазете цветни изображения на индекса

Вижте [Индекс/LUT Sandbox](index-lut-sandbox.md) за подробности.

***

## Следващи стъпки

Сега, когато разбирате слоевете на изображенията:

* [**Отваряне на изображение на цял екран**](opening-an-image-full-screen.md) – Пълен наръчник за Image Viewer
* [**Index/LUT Sandbox**](index-lut-sandbox.md) – Интерактивна визуализация на индекса
* [**Формули за мултиспектрален индекс**](../project-settings/multispectral-index-formulas.md) – Референция за наличните индекси
* [**Завършване на обработката**](../processing-images-gui/finishing-the-processing.md) – Разбиране на обработените резултати
